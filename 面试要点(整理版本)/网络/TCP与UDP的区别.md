TCP 和 UDP 有哪些区别？

TCP 是面向连接的，UDP 是面向无连接的。


所谓的建立连接，是为了在客户端和服务端维护连接，而建立一定的数据结构来维护双方交互的状态，用这样的数据结构来保证所谓的面向连接的特性。

TCP 特性：
- TCP 提供可靠交付
- TCP 是面向字节流的
- TCP 是可以有拥塞控制的
- TCP 其实是一个有状态服务

UDP特性：
- UDP 继承了 IP 包的特性，不保证不丢失，不保证按顺序到达。
- UDP 继承了 IP 的特性，基于数据报的，一个一个地发，一个一个地收。
- UDP 就不会，应用让我发，我就发，管它洪水滔天。
- UDP 则是无状态服务

总结： 
我们常说的TCP/UDP他们的区别是什什么？分别适合⽤用在什什么场景?
- UDP是⽆连接的，TCP必须三次握手建立连接
- UDP是⾯向报⽂文，没有拥塞控制，所以速度快，适合多媒体通信要求，⽐比如及时聊天，⽀支持⼀对一，一队多。多对一，多对多。就像⽜客网的视频面试就是⽤的UDP
- TCP只能是⼀对一的可靠性传输


TCP通过什么方式提供可靠性？
- 超时重发，发出报⽂文段要是没有收到及时的确认，会重发。
- 数据包的校验，也就是校验首部数据和。
- 对失序的数据重新排序
- 进行流量控制，防止缓冲区溢出
- 快重传和快恢复
- TCP会将数据截断为合理理的⻓长度


TCP如何控制拥塞

拥塞控制就是防⽌止过多的数据注⼊网络中，这样可以使网络中的路由器或链路不致过载。
发送方维持⼀个叫做拥塞窗口cwnd（congestion window）的状态变量。为了了防⽌cwnd增⻓过⼤引起⽹络拥塞，还需设置⼀个慢开始⻔限ssthresh状态变量。
ssthresh的⽤用法如下：
当cwnd<ssthresh时，使⽤用慢开始算法。也就是乘法算法
当cwnd>ssthresh时，改⽤拥塞避免算法。也就是加法算法
当cwnd=ssthresh时，慢开始与拥塞避免算法任意。
当出现拥塞的时候就把新的门限值设为此时窗口⼤⼩的一半，再重新执⾏上⾯的步骤。
当收到连续三个重传的时候这就需要快重传和快恢复了，
当收到连续三个重传这个时候发送方就要重传自己的信息，然后门限减半但是这个时候并不是网络阻塞，窗⼝只会减半执⾏拥塞避免算法。

### TCP的流量控制是基于窗口机制实现的：
在建立连接时， 发送方和接收方都会建立一个缓存区，在两端进行通信时，数据包头部会有一个窗口字段，标识了接收端剩余的缓存空间。发送方根据窗口字段的值去判断发送数据的大小，从而避免了缓存溢出。
TCP的拥塞控制算法包含了：
慢启动，拥塞避免，快速重传，快速恢复
慢启动指的是发送数据的量从较低的起始值，如一个报文段慢慢指数增长
拥塞避免是指当拥塞的窗口小于阈值时，又指数增长降低为线性增长
快速重传是指超过三次重复确认即视为传输失败，立即重传
快速恢复是指发生快速重传后，立刻减低窗口阈值，并进行拥塞避免的线性增长算法，避免因为拥塞阻碍了重传